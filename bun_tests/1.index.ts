import { FeeBumpTransaction, Networks, scValToNative } from '@stellar/stellar-sdk';

const tx_xdr = "AAAABQAAAABNaBZJk5idBm4/YrzSeX17zmI6GXojYX+w86x50onj6QAAAAAABMtqAAAAAgAAAACQDqA5CrZeRTjuoG0NpfSwaMUD31ZBIZ4ZSfw13SGqtwAEyVQDVznCAAANtQAAAAEAAAAAAAAAAAAAAABnz0JaAAAAAAAAAAEAAAAAAAAAGAAAAAAAAAAB1/5EvQrxHWArEJHy9KH03yEtRE0DIeoyrbPMHLurCgQAAAAFcGxhbnQAAAAAAAACAAAAEgAAAAAAAAAAgWbdciaSbXtO//fl8hutd44PxqGtpSognt2j+x6XtYcAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACBZt1yJpJte07/9+XyG613jg/Goa2lKiCe3aP7Hpe1hzyN1fhaOV1zA1fkfAAAABAAAAABAAAAAQAAABEAAAABAAAAAgAAAA8AAAAKcHVibGljX2tleQAAAAAADQAAACCBZt1yJpJte07/9+XyG613jg/Goa2lKiCe3aP7Hpe1hwAAAA8AAAAJc2lnbmF0dXJlAAAAAAAADQAAAEBWVrN2pduxjdps/l/o8qBRvBnpbU0fp6ZcM9KXBF89fyIkSnOmqdmiMfEiQEfdWOKghgGr9MHDBMOnf0Pt3F4FAAAAAAAAAAHX/kS9CvEdYCsQkfL0ofTfIS1ETQMh6jKts8wcu6sKBAAAAAVwbGFudAAAAAAAAAIAAAASAAAAAAAAAACBZt1yJpJte07/9+XyG613jg/Goa2lKiCe3aP7Hpe1hwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAAAgWbdciaSbXtO//fl8hutd44PxqGtpSognt2j+x6XtYcAAAAGAAAAAdf+RL0K8R1gKxCR8vSh9N8hLURNAyHqMq2zzBy7qwoEAAAAEAAAAAEAAAACAAAADwAAAAVCbG9jawAAAAAAAAMAAHvdAAAAAAAAAAezhDJ/0QmuUO8WRUiDc7w9m1Rwl0y1Sh3IXZZvZjHG2wAAAAQAAAAGAAAAAAAAAACBZt1yJpJte07/9+XyG613jg/Goa2lKiCe3aP7Hpe1hwAAABU8jdX4WjldcwAAAAAAAAAGAAAAAdf+RL0K8R1gKxCR8vSh9N8hLURNAyHqMq2zzBy7qwoEAAAAEAAAAAEAAAACAAAADwAAAAVCbG9jawAAAAAAAAMAAHveAAAAAAAAAAYAAAAB1/5EvQrxHWArEJHy9KH03yEtRE0DIeoyrbPMHLurCgQAAAAQAAAAAQAAAAMAAAAPAAAABFBhaWwAAAASAAAAAAAAAACBZt1yJpJte07/9+XyG613jg/Goa2lKiCe3aP7Hpe1hwAAAAMAAHveAAAAAAAAAAYAAAAB1/5EvQrxHWArEJHy9KH03yEtRE0DIeoyrbPMHLurCgQAAAAUAAAAAQBK5N4AAFHoAAAGDAAAAAAABMlUAAAAAd0hqrcAAABAjRgMA5iNK1eQmS/+4pRWZ8ZVbr4qWZrl82lEUh6eLhzq3ngupc3iu387RwXPd9wSYJ+2RNuRvR2qN1cJndHQCgAAAAAAAAAB0onj6QAAAEDuXw/EvizZQ5/9KmFBpz+ClLzDsKsNqq2tepaXEl7Gl5j+wB0TUCgfugg0LBLFmhhmxTM9A3XutPgz+/YurnMF";

const tx = new FeeBumpTransaction(tx_xdr, Networks.PUBLIC);

const sorobanData = tx.innerTransaction.toEnvelope().v1().tx().ext().sorobanData();

for (let entry of sorobanData.resources().footprint().readOnly()) {
    
    try {
        const key = scValToNative(entry.contractData().key())
        console.log(key);
    } catch {

    }
    
}
